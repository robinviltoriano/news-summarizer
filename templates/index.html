<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="../static/css/main.css" />
    <title>News Summary</title>
  </head>
  <body>
    <div class="img-container">
      <img
        src="https://cdn.storifyme.xyz/accounts/abc-net-au/assets/f-abc-lissajous-white-15861653372072846.png?t=1653881428000"
        alt="an image of news logo"
      />
      <h1>South Australia News Summary</h1>
    </div>
    <p id="date">Current Date: {{ my_date.strftime('%d-%m-%Y') }}</p>

    <table id="newsTable">
      <thead>
        <tr>
          <th>Headline</th>
          <th>News</th>
          <th>Summarized News</th>
        </tr>
      </thead>
      <tbody id="newsBody">
        <!-- JavaScript will populate this section -->
      </tbody>
    </table>

    <script>
      // Example JSON data
      var jsonData = {{ news_dictionary | tojson | safe }};

      // Function to create a table row for each entry in the JSON data
      function createTableRows() {
          var tableBody = document.getElementById("newsBody");

          for (var key in jsonData) {
              if (jsonData.hasOwnProperty(key)) {
                  var row = tableBody.insertRow();
                  var cell1 = row.insertCell(0);
                  var cell2 = row.insertCell(1);
                  var cell3 = row.insertCell(2);

                  cell1.innerHTML = "<p id='headline'>" + jsonData[key].headline + "</p><img id='table_img' src='" + jsonData[key].img + "' alt='News Image'>";
                  cell2.innerHTML = "<p id='original_text'>"+jsonData[key].original_text+"</p>";
                  cell3.innerHTML = "<p id='summarized_text'>"+jsonData[key].summarized_text+"</p>";
              }
          }
      }

      // Call the function to populate the table
      createTableRows();
    </script>
  </body>
</html>
